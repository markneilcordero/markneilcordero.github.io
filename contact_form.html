<!Doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Contact Me</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
<style>
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}
body {
    display: flex;
    flex-direction: column;
}
.main-content {
    flex: 1;
}
footer {
    background-color: #212529;
    color: #fff;
    padding: 20px 0;
    text-align: center;
}
.contact-section {
    max-width: 600px;
    margin: auto;
    padding: 50px 20px;
}
.alert {
    display: none;
}
</style>
</head>
<body>

<div id="navbar-placeholder"></div>

<div class="main-content">
    <div class="container contact-section">
        <h2 class="text-center mb-4">Contact Me</h2>
        
        <div class="alert alert-success" id="success-msg"></div>
        <div class="alert alert-danger" id="error-msg"></div>
    
        <form id="contact-form">
            <div class="mb-3">
                <label for="name" class="form-label">Your Name *</label>
                <input type="text" class="form-control" id="name" name="name" required />
            </div>
    
            <div class="mb-3">
                <label for="email" class="form-label">Your Email *</label>
                <input type="email" class="form-control" id="email" name="email" required />
            </div>
    
            <div class="mb-3">
                <label for="subject" class="form-label">Subject</label>
                <input type="text" class="form-control" id="subject" name="subject" />
            </div>
    
            <div class="mb-3">
                <label for="message" class="form-label">Message *</label>
                <textarea class="form-control" id="message" name="message" rows="5" required></textarea>
            </div>
    
            <button type="submit" class="btn btn-primary w-100">Send Message</button>
        </form>
    </div>
</div>

<div id="footer-placeholder"></div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
$(function () {
    $('#navbar-placeholder').load('navbar.html');
});

$(document).ready(function () {
    $('#contact-form').submit(function (e) {
        e.preventDefault();

        $('#success-msg').hide();
        $('#error-msg').hide();

        $.ajax({
            url: 'https://markneilcordero.com/jquery-portfolio-api/public/api/contact',
            method: 'POST',
            data: {
                name: $('#name').val(),
                email: $('#email').val(),
                subject: $('#subject').val(),
                message: $('#message').val()
            },
            success: function (response) {
                $('#success-msg').text(response.message).fadeIn();
                $('#contact-form')[0].reset();
            },
            error: function (xhr) {
                let errorMsg = 'Something went wrong.';
                if (xhr.responseJSON?.message) {
                    errorMsg = xhr.responseJSON.message;
                }
                if (xhr.responseJSON?.errors) {
                    errorMsg += '<ul>';
                    $.each(xhr.responseJSON.errors, function (key, value) {
                        errorMsg += `<li>${value[0]}</li>`;
                    });
                    errorMsg += '</ul>';
                }
                $('#error-msg').html(errorMsg).fadeIn();
            }
        });
    });
});

$(function () {
    $('#footer-placeholder').load('footer.html');
});
</script>
</body>
</html>